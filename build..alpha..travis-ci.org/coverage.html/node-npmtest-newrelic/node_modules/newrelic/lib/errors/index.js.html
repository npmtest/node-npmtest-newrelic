<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-newrelic/node_modules/newrelic/lib/errors/index.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-newrelic">npmtest-newrelic (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-newrelic/node_modules/newrelic/lib/errors/index.js</span></h1>
    <h2>
        
        Statements: <span class="metric">10.53% <small>(8 / 76)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 50)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 3)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">10.81% <small>(8 / 74)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-newrelic/node_modules/newrelic/lib/errors/</a> &#187; index.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict'
&nbsp;
var urltils = require('../util/urltils')
var NAMES = require('../metrics/names')
var util = require('util')
&nbsp;
module.exports.createError = createError
module.exports.createEvent = createEvent
&nbsp;
/**
 * Given either or both of a transaction and an exception, generate an error
 * trace in the JSON format expected by the collector. Since this will be
 * used by both the HTTP instrumentation, which uses HTTP status codes to
 * determine whether a transaction is in error, and the domain-based error
 * handler, which traps actual instances of Error, try to set sensible
 * defaults for everything.
 *
 * @param {Transaction} transaction      The agent transaction, presumably
 *                                       coming out of the instrumentation.
 * @param {Error}       exception        Something trapped by an error listener.
 * @param {object}      customParameters Any custom parameters associated with
 *                                       the request (optional).
 */
<span class="fstat-no" title="function not covered" >function createError(transaction, exception, customParameters, config) {</span>
<span class="cstat-no" title="statement not covered" >  var name = 'Unknown'</span>
<span class="cstat-no" title="statement not covered" >  var message = ''</span>
<span class="cstat-no" title="statement not covered" >  var type = 'Error'</span>
<span class="cstat-no" title="statement not covered" >  var params = {</span>
    request_uri: '',
    userAttributes: {},
    agentAttributes: {},
    intrinsics: {}
  }
&nbsp;
  // String errors do not provide us with as much information to provide to the
  // user, but it is a common pattern.
<span class="cstat-no" title="statement not covered" >  if (typeof exception === 'string') {</span>
<span class="cstat-no" title="statement not covered" >    message = exception</span>
  } else <span class="cstat-no" title="statement not covered" >if (exception !== null &amp;&amp; typeof exception === 'object' &amp;&amp; exception.message) {</span>
<span class="cstat-no" title="statement not covered" >    message = exception.message</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (exception.name) {</span>
<span class="cstat-no" title="statement not covered" >      type = exception.name</span>
    } else <span class="cstat-no" title="statement not covered" >if (exception.constructor &amp;&amp; exception.constructor.name) {</span>
<span class="cstat-no" title="statement not covered" >      type = exception.constructor.name</span>
    }
  } else <span class="cstat-no" title="statement not covered" >if (transaction &amp;&amp; transaction.statusCode &amp;&amp;</span>
             urltils.isError(config, transaction.statusCode)) {
<span class="cstat-no" title="statement not covered" >    message = 'HttpError ' + transaction.statusCode</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (transaction) {</span>
    // transaction.getName is expensive due to running normalizers and ignore
    // rules if a name hasn't been assigned yet. Also has the side effect of
    // changing the transaction's url property or ignore status.
<span class="cstat-no" title="statement not covered" >    var txName = transaction.getName()</span>
<span class="cstat-no" title="statement not covered" >    if (txName) {</span>
<span class="cstat-no" title="statement not covered" >      name = txName</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (transaction.isWeb()) {</span>
<span class="cstat-no" title="statement not covered" >      params.request_uri = transaction.getScrubbedUrl()</span>
    }
&nbsp;
    // Copy all of the parameters off of the transaction.
<span class="cstat-no" title="statement not covered" >    params.agentAttributes = transaction.trace.parameters</span>
<span class="cstat-no" title="statement not covered" >    params.intrinsics = transaction.getIntrinsicAttributes()</span>
&nbsp;
    // Custom params aren't filtered by capture_params or ignore_params, just by
    // high security mode.
<span class="cstat-no" title="statement not covered" >    if (!config.high_security) {</span>
<span class="cstat-no" title="statement not covered" >      urltils.overwriteParameters(config, transaction.trace.custom, params.userAttributes)</span>
    }
  }
  // This will strip out any ignored params or not include the custom params if
  // capture params is disabled.
<span class="cstat-no" title="statement not covered" >  if (!config.high_security &amp;&amp; customParameters) {</span>
<span class="cstat-no" title="statement not covered" >    urltils.overwriteParameters(config, customParameters, params.userAttributes)</span>
  }
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >  var stack = exception &amp;&amp; exception.stack</span>
<span class="cstat-no" title="statement not covered" >  if (stack) <span class="cstat-no" title="statement not covered" >params.stack_trace = ('' + stack).split(/[\n\r]/g)</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var res = [0, name, message, type, params]</span>
<span class="cstat-no" title="statement not covered" >  if (transaction) {</span>
<span class="cstat-no" title="statement not covered" >    Object.defineProperty(res, 'transaction', {</span>
      value: transaction.id
    })
  }
<span class="cstat-no" title="statement not covered" >  return res</span>
}
&nbsp;
/**
 * Creates a structure for error event that is sent to the collector.
 * The error parameter is an output of the createError() function for a given exception.
 */
<span class="fstat-no" title="function not covered" >function createEvent(transaction, error, timestamp) {</span>
<span class="cstat-no" title="statement not covered" >  var message = error[2]</span>
<span class="cstat-no" title="statement not covered" >  var errorClass = error[3]</span>
<span class="cstat-no" title="statement not covered" >  var paramsFromError = error[4]</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var intrinsicAttributes = _getErrorEventIntrinsicAttrs(transaction, errorClass, message,</span>
      timestamp)
&nbsp;
  // the error structure created by createError() already performs filtering of custom
  // and agent attributes, so it is ok to just copy them
<span class="cstat-no" title="statement not covered" >  var userAttributes = util._extend({}, paramsFromError.userAttributes)</span>
<span class="cstat-no" title="statement not covered" >  var agentAttributes = util._extend({}, paramsFromError.agentAttributes)</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var errorEvent = [</span>
    intrinsicAttributes,
    userAttributes,
    agentAttributes
  ]
&nbsp;
<span class="cstat-no" title="statement not covered" >  return errorEvent</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function _getErrorEventIntrinsicAttrs(transaction, errorClass, message, timestamp) {</span>
  // the server expects seconds instead of milliseconds
<span class="cstat-no" title="statement not covered" >  if (timestamp) <span class="cstat-no" title="statement not covered" >timestamp = timestamp / 1000</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  var attributes = {</span>
    type: "TransactionError",
    "error.class": errorClass,
    "error.message": message,
    timestamp: timestamp
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  if (transaction) {</span>
<span class="cstat-no" title="statement not covered" >    attributes.transactionName = transaction.name</span>
<span class="cstat-no" title="statement not covered" >    attributes.duration = transaction.timer.getDurationInMillis() / 1000</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var metric = transaction.metrics.getMetric(NAMES.QUEUETIME)</span>
<span class="cstat-no" title="statement not covered" >    if (metric) {</span>
<span class="cstat-no" title="statement not covered" >      attributes.queueDuration = metric.total</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    metric = transaction.metrics.getMetric(NAMES.EXTERNAL.ALL)</span>
<span class="cstat-no" title="statement not covered" >    if (metric) {</span>
<span class="cstat-no" title="statement not covered" >      attributes.externalDuration = metric.total</span>
<span class="cstat-no" title="statement not covered" >      attributes.externalCallCount = metric.callCount</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    metric = transaction.metrics.getMetric(NAMES.DB.ALL)</span>
<span class="cstat-no" title="statement not covered" >    if (metric) {</span>
<span class="cstat-no" title="statement not covered" >      attributes.databaseDuration = metric.total</span>
<span class="cstat-no" title="statement not covered" >      attributes.databaseCallCount = metric.callCount</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (transaction.syntheticsData) {</span>
<span class="cstat-no" title="statement not covered" >      attributes["nr.syntheticsResourceId"] = transaction.syntheticsData.resourceId</span>
<span class="cstat-no" title="statement not covered" >      attributes["nr.syntheticsJobId"] = transaction.syntheticsData.jobId</span>
<span class="cstat-no" title="statement not covered" >      attributes["nr.syntheticsMonitorId"] = transaction.syntheticsData.monitorId</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    attributes['nr.transactionGuid'] = transaction.id</span>
<span class="cstat-no" title="statement not covered" >    attributes['nr.referringTransactionGuid'] = transaction.referringTransactionGuid</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (transaction.port) {</span>
<span class="cstat-no" title="statement not covered" >      attributes.port = transaction.port</span>
    }
  } else {
<span class="cstat-no" title="statement not covered" >    attributes.transactionName = 'Unknown'</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return attributes</span>
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Mon Apr 17 2017 21:26:41 GMT+0000 (UTC)</div>
</div>
</body>
</html>
